var validateEmailAddress = function() {
    var error = false;

    // Validate Email Address
    $("#ibEmailWarning").hide();
    $("#emailAddress").nextAll().remove();
    if ($("#emailAddress").val() == "") {
        $("#emailAddress").after("<div class='alert alert-danger'><p>" + globals.staticTextMap['#basicRequired'][globals.currentLanguage] + "</p></div>");
        error = true;
    } else {
        var params = new Object();
        params.action = "utility";
        params.cmd = "validateEmailFormat";
        params.emailAddress = $("#emailAddress").val();
        params.validateAsCredential = $("#emailAddress").attr("validateAsCredential");

        $.ajax({
            type : "POST",
            url : getApplicationMainURL(),
            dataType : "json",
            data : params,
            async : false,
            success : function(data, textStatus, jqXHR) {
                if (!data.isEmailFormatValid) {
                    $("#emailAddress").after("<div class='alert alert-danger'><p>" + globals.staticTextMap['#invalid'][globals.currentLanguage] + "</p></div>");
                    error = true;
                } else if (params.validateAsCredential == "true" && !data.isEmailCredentialValid) {
                	$("#emailAddress").after("<div class='alert alert-danger'><p>" + globals.staticTextMap['#invalidEmailCredential'][globals.currentLanguage] + "</p></div>");
                    error = true;
                } else if (params.validateAsCredential == "true" && data.invalidEmailCredentialFormat) {
                	$("#emailAddress").after("<div class='alert alert-danger'><p>" + globals.staticTextMap['#invalidEmailCredentialFormat'][globals.currentLanguage] + "</p></div>");
                    error = true;
                }

                if (!error && data.isEmailCompanyDomain && $("#ibEmailWarning").length) {
                    $("#ibEmailWarning").show();
                }
            }
        });
    }

    $("#emailAddress").removeAttr("data-valid");
    if (!error) {
        $("#emailAddress").attr("data-valid", "true");
        $("#emailAddress").closest(".form-group").removeClass("has-error").addClass("has-success");
    } else {
        $("#emailAddress").closest(".form-group").removeClass("has-success").addClass("has-error");
    }
    return error;
}

//# sourceURL=emailAddress.js