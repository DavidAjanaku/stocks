function getStoredUtmParams(){try{var e=getItem("storedUtmParams");if(console.log("storedUtmParams",e),!e)return{};var t=JSON.parse(e);return t&&"object"==typeof t&&t.utmCampaign?t:{}}catch(n){return console.error(n),{}}}function storeUtmParams(e){try{setItem("storedUtmParams",JSON.stringify(e))}catch(t){console.log(t)}}function utmParamsFromQuery(){try{var e=new URLSearchParams(window.location.search);return{utmCampaign:e.get("utm_campaign")||"",utmSource:e.get("utm_source")||"",utmMedium:e.get("utm_medium")||""}}catch(t){console.error(t);var n=window.location.search.match(/campaign=([^&]+)/i),o=n.length?n[1]:"",a=window.location.search.match(/source=([^&]+)/i),i=a.length?a[1]:"",c=window.location.search.match(/medium=([^&]+)/i),r=c.length?c[1]:"";return{utmCampaign:o,utmSource:i,utmMedium:r}}}function setItem(e,t){try{localStorage.setItem(e,t)}catch(n){console.log(n)}try{setCookie(e,t)}catch(n){console.log(n)}}function getItem(e){try{var t=localStorage.getItem(e);if(t)return t}catch(n){console.error(n)}try{var o=getCookie(e);if(o)return o}catch(n){console.error(n)}return void 0}function setCookie(e,t){var n=new Date;n.setTime(n.getTime()+2592e3);var o="; expires="+n.toUTCString();document.cookie=e+"="+(t||"")+o+"; path=/"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return void 0}function gtag(){dataLayer.push(arguments)}$(document).ready(function(){$("#ios_badge_isa").on("click",function(e){ga("send","event","iOS badge","Click","ISA")}),$("#android_badge_isa").on("click",function(e){ga("send","event","Android badge","Click","ISA")})}),window.addEventListener("load",function(){console.debug("Loading Branch"),function(e,t,n,o,a,i,c,r,d,s){if(!e[o]||!e[o]._q){for(;r<c.length;)a(i,c[r++]);d=t.createElement(n),d.async=1,d.src="https://cdn.branch.io/branch-latest.min.js",s=t.getElementsByTagName(n)[0],s.parentNode.insertBefore(d,s),e[o]=i}}(window,document,"script","branch",function(e,t){e[t]=function(){e._q.push([t,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking".split(" "),0),console.debug("Initialising Branch"),branch.init("key_live_bgt0jOl9SkhpFgR2GRer1pieCsohNp74",function(e,t){console.log(e,t)});var e=getStoredUtmParams();console.debug("Got stored UTM parameters",e);var t={campaign:e.utmCampaign||"",channel:e.utmSource||"",feature:e.utmMedium||"",stage:"",tags:[],alias:"",data:{$fallback_url:"https://apps.apple.com/gb/app/freetrade-simple-investing/id1354479011",$ios_url:"https://apps.apple.com/gb/app/freetrade-simple-investing/id1354479011",$android_url:"https://play.google.com/store/apps/details?id=io.freetrade.android&hl=en_GB"}},n={campaign:e.utmCampaign||"",channel:e.utmSource||"",feature:e.utmMedium||"",stage:"",tags:[],alias:"",data:{$fallback_url:"https://play.google.com/store/apps/details?id=io.freetrade.android&hl=en_GB",$ios_url:"https://apps.apple.com/gb/app/freetrade-simple-investing/id1354479011",$android_url:"https://play.google.com/store/apps/details?id=io.freetrade.android&hl=en_GB"}};console.debug("Branch linkData",{iosLinkData:t,androidLinkData:n}),branch.link(t,function(e,t){console.debug("Branch bind ios_button",{link:t}),document.querySelectorAll("button.ios_button, button.ios-download, #ios_button").forEach(function(n){n.onclick=function(){window.open(t||e)}}),console.debug("Branch bind ios_anchor",{link:t}),document.querySelectorAll("a.ios-button, a.ios_anchor, #ios_anchor").forEach(function(n){n.href=t||e})}),branch.link(n,function(e,t){console.debug("Branch bind android_button",{link:t}),document.querySelectorAll("button.android_button, button.android-download, #android_button").forEach(function(n){n.onclick=function(){window.open(t||e)}}),console.debug("Branch bind android_anchor",{link:t}),document.querySelectorAll("a.android-button, a.android_anchor, #android_anchor").forEach(function(n){n.href=t||e})})}),function(){var e=utmParamsFromQuery();e&&e.utmCampaign&&storeUtmParams(e)}(),function(e,t,n,o,a,i,c){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,i=t.createElement(n),c=t.getElementsByTagName(n)[0],i.async=1,i.src=o,c.parentNode.insertBefore(i,c)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-75705454-2","auto"),ga("require","GTM-PW2SP4X"),ga("send","pageview"),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-75705454-2",{optimize_id:"GTM-PW2SP4X"}),function(e,t,n,o,a,i){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:1339037,hjsv:6},a=t.getElementsByTagName("head")[0],i=t.createElement("script"),i.async=1,i.src=n+e._hjSettings.hjid+o+e._hjSettings.hjsv,a.appendChild(i)}(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv="),!function(e,t,n,o,a,i){e.twq||(o=e.twq=function(){o.exe?o.exe.apply(o,arguments):o.queue.push(arguments)},o.version="1.1",o.queue=[],a=t.createElement,a.async=!0,a.src="//static.ads-twitter.com/uwt.js",i=t.getElementsByTagName[0],i?i.parentNode.insertBefore(a,i):void 0)}(window,document,"script"),twq("init","o30nd"),twq("track","PageView"),$(document).ready(function(){$("#ios_button").on("click",function(e){ga("send","event","iOS badge","Click","app button click")}),$("#android_button").on("click",function(e){ga("send","event","Android badge","Click","app button click")}),$("#ios_badge2").on("click",function(e){ga("send","event","iOS badge","Click","app button click")}),$("#android_badge2").on("click",function(e){ga("send","event","Android badge","Click","app button click")}),$("#ios_badge3").on("click",function(e){ga("send","event","iOS badge","Click","app button click")}),$("#android_badge3").on("click",function(e){ga("send","event","Android badge","Click","app button click")}),$("#ios_badge_crowd").on("click",function(e){ga("send","event","iOS badge crowd","Click","app button click")}),$("#android_badge_crowd").on("click",function(e){ga("send","event","Android badge crowd","Click","app button click")}),$("#mc-embedded-subscribe-form").on("submit",function(e){ga("send","event","email signup","Submit","content")}),$("#isa-offer-form").on("submit",function(e){ga("send","event","email signup","Submit","content")}),$("#open_sipp").on("click",function(e){ga("send","event","sipp button","Click","sipp button click")}),$("#transfer_sipp").on("click",function(e){ga("send","event","sipp button","Click","sipp button click")})});